<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Camera Trap Data Analysis • compbio2020</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Camera Trap Data Analysis">
<meta property="og:description" content="compbio2020">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">compbio2020</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/00_Syllabus_and_Expectations.html">Syllabus</a>
    </li>
    <li>
      <a href="../articles/01_Getting_Started_with_R.html">Starting with R</a>
    </li>
    <li>
      <a href="../articles/02_Starting_with_Data.html">Starting with data</a>
    </li>
    <li>
      <a href="../articles/03_Manipulating_Data.html">Manipulating, analyzing and exporting data with tidyverse</a>
    </li>
    <li>
      <a href="../articles/04-plotting.html">Data visualization with ggplot2</a>
    </li>
    <li>
      <a href="../articles/05-Functions.html">Functions and repeatability</a>
    </li>
    <li>
      <a href="../articles/06_Exploration_Setup.html">Exploration</a>
    </li>
    <li>
      <a href="../articles/07_Exploration_Hands_On.html">Exploration Hands-On</a>
    </li>
    <li>
      <a href="../articles/08_linear_models.html">Introduction to Linear Models: Building and Interpreting Linear Regressions</a>
    </li>
    <li>
      <a href="../articles/09_Tree_of_life.html">GeneticData</a>
    </li>
    <li>
      <a href="../articles/10_GBIF_and_Location.html">GBIF And Spatial Data</a>
    </li>
    <li>
      <a href="../articles/Bonus_FunctionReference.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/FunctionReference.html">FunctionReference.Rmd</a>
    </li>
    <li>
      <a href="../articles/HW5.html">Homework Five</a>
    </li>
    <li>
      <a href="../articles/HomeworkFive.html">Homework Five</a>
    </li>
    <li>
      <a href="../articles/HomeworkFour.html">Homework Four</a>
    </li>
    <li>
      <a href="../articles/HomeworkOne.html">Homework One</a>
    </li>
    <li>
      <a href="../articles/HomeworkSix.html">HomeworkSix</a>
    </li>
    <li>
      <a href="../articles/HomeworkThree.html">Homework Three</a>
    </li>
    <li>
      <a href="../articles/HomeworkTwo.html">Homework Two</a>
    </li>
    <li>
      <a href="../articles/ProjectOne.html">ProjectOne</a>
    </li>
    <li>
      <a href="../articles/ProjectTwo.html">Project Two</a>
    </li>
    <li>
      <a href="../articles/TeagueTest.html">Camera Trap Data Analysis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="TeagueTest_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Camera Trap Data Analysis</h1>
                        <h4 class="author">Teague O’Mara, Southeastern Louisiana University</h4>
            
            <h4 class="date">10/22/2020</h4>
      
      
      <div class="hidden name"><code>TeagueTest.Rmd</code></div>

    </div>

    
    
<div id="measuring-communities-through-camera-traps" class="section level2">
<h2 class="hasAnchor">
<a href="#measuring-communities-through-camera-traps" class="anchor"></a>Measuring communities through camera traps</h2>
<p>Camera traps are a great way to monitor species &amp; communities. They are minimally invasive &amp; provide a way to see what animals are doing without interfering with them. They can be deployed for long periods of time (our models will run for ~10 months on 1 set of batteries), making them a time and cost effective method for monitoring medium to large sized mammals.</p>
<p>We’ll explore how to organize and interpret data from camera traps by first using some public data downloaded from eMammal that were taken in several habitats in Florida, including Bottomland Hardwood Forest (BLHF). This is the habitat best represented by North Oak Park. We’ll compare the BLHF to other habitats in Florida to get a sense of overall mammal richness, abundance, and diversity.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co">#Download a Google Sheet of the data. FYI This will take a few minutes.</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">googlesheets4</span>)
<span class="fu"><a href="https://rdrr.io/pkg/googlesheets4/man/gs4_deauth.html">gs4_deauth</a></span>()
<span class="no">cam</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/googlesheets4/man/range_read.html">read_sheet</a></span>(<span class="st">"https://docs.google.com/spreadsheets/d/1esrbC-QqoufjlDHXtIYtDcsXovC_x6o6Z4JfBPKvg3s/edit?usp=sharing"</span>)</pre></body></html></div>
<p>Let’s have a quick look at what we have in these data</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(<span class="no">cam</span>) <span class="co">#Dimensions of cam. How many rows &amp; columns.</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">cam</span>)
<span class="no">cam</span></pre></body></html></div>
<p>There are a lot of column names that have spaces in them. This is fine for the tidyverse tibble that the data currently occupy, but R hates spaces, and are a pain for typing out since they would need quotes around them all of the time. We’ll change the column names into something that is easier to use later. We’ll also clean up the names of the Subprojects.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">cam</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/make.names.html">make.names</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">cam</span>), <span class="kw">unique</span> <span class="kw">=</span> <span class="fl">TRUE</span>) <span class="co">#create good names without spaces</span>

<span class="co">#We need to clean up names and get rid of spaces. These search for spaces in the given column names and replace them with periods</span>
<span class="no">cam</span>$<span class="no">Species.Name</span> <span class="kw">&lt;-</span> <span class="fu">str_replace_all</span>(<span class="no">cam</span>$<span class="no">Species.Name</span>, <span class="st">" "</span>, <span class="st">"."</span>)
<span class="no">cam</span>$<span class="no">Common.Name</span> <span class="kw">&lt;-</span> <span class="fu">str_replace_all</span>(<span class="no">cam</span>$<span class="no">Common.Name</span>, <span class="st">" "</span>, <span class="st">"."</span>)
<span class="no">cam</span>$<span class="no">Subproject</span> <span class="kw">&lt;-</span> <span class="fu">str_replace_all</span>(<span class="no">cam</span>$<span class="no">Subproject</span>, <span class="st">" "</span>, <span class="st">"."</span>)
<span class="no">cam</span>$<span class="no">Subproject</span> <span class="kw">&lt;-</span> <span class="fu">str_replace_all</span>(<span class="no">cam</span>$<span class="no">Subproject</span>, <span class="st">"/"</span>, <span class="st">"."</span>) <span class="co">#there is one subproject name that has a /. Let's just change it to a period for consistency's sake.</span></pre></body></html></div>
<p>I want to start summarizing some of the data into counts of each species type per subproject (or forest type). I only need a few of the columns, so I’m going to select those first so that I can count up the number of species found in each subproject. This will give a table with species as rows and Subprojects as columns. I have set it up this way because the package that we’ll use to analyze diversity <code>iNEXT</code> requires this format.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">speciesCount</span> <span class="kw">&lt;-</span> <span class="no">cam</span> <span class="kw">%&gt;%</span> <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">Common.Name</span>, <span class="no">Count</span>, <span class="no">Subproject</span>) <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">Common.Name</span>, <span class="no">Subproject</span>) <span class="kw">%&gt;%</span> <span class="co">#Here I group the data by species and the subproject</span>
  <span class="fu">summarize</span>(<span class="kw">totalCount</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="no">Count</span>)) <span class="kw">%&gt;%</span> <span class="co">#This now gives the sum of the count of each species per subproject</span>
  <span class="fu">spread</span>(<span class="no">Subproject</span>, <span class="no">totalCount</span>) <span class="co">#Now I need to change the orientation so that species are rows and subprojects are columns. This pivots the table to do that. More explanation here: https://rpubs.com/bradleyboehmke/data_wrangling</span>
<span class="no">speciesCount</span></pre></body></html></div>
<p>This now tells us how many times each species appeared on a photo sequence in each location. In our study of North Oak Park, you could substitute camera for subproject to see counts per camera location.</p>
</div>
<div id="richness-abundance-diversity" class="section level2">
<h2 class="hasAnchor">
<a href="#richness-abundance-diversity" class="anchor"></a>Richness, Abundance, &amp; Diversity</h2>
<p>There are a few ways to think about communities of species and their composition. <strong>Richness</strong> is just the number of species that are present at site. This is an easy one – we can just count those up. <strong>Abundance</strong> is the number of individuals of each species in a site. This takes a bit to calculate. <strong>Diversity</strong> is a combination of richness &amp; abundance. It can be calculated in a few different ways, but defines the different number of species in an area (richness) and its abundance and the distribution of these species in that ecosystem. It’s a measure of the variety in the ecosystem.</p>
<p>Diversty in an ecological community can tell you a lot about what kind of community it is. Does it have a lot of different kinds of opportunities &amp; ecological niches? Are there many types of feeding and resting habitats available?</p>
<p>In this exercise we’ll calculate different diversity metrics to understand how mammal communities can change. We’ll use the package <code>iNEXT</code> to do this. This program calculates Hill numbers that allow us to compare communities of different sizes. Hill numbers are the <em>effective number of species</em> and can be a direct reflection of older diversity metrics, but are a better measure of diversity because the non-linearity of other diversity indices (like the Shannon Diversity Index), makes it difficult to really interpret the values across many studies. Hill numbers are more straight-forward. A nice set of examples and discussion here: <a href="https://jonlefcheck.net/2012/10/23/diversity-as-effective-numbers/" class="uri">https://jonlefcheck.net/2012/10/23/diversity-as-effective-numbers/</a>.</p>
<div id="abundance" class="section level4">
<h4 class="hasAnchor">
<a href="#abundance" class="anchor"></a>Abundance</h4>
<p>First, we’ll calculate simple <strong>Abundance</strong> for each Subproject / Forest Type</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">abundance</span> <span class="kw">&lt;-</span> <span class="no">cam</span> <span class="kw">%&gt;%</span> <span class="fu">group_by</span>(<span class="no">Subproject</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(!<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">Species.Name</span>)) <span class="kw">%&gt;%</span>  <span class="co">#filter out any NAs in the species name, just in case</span>
  <span class="fu">summarize</span>(<span class="kw">SpeciesAbundance</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="no">Species.Name</span>)))
<span class="no">abundance</span></pre></body></html></div>
<p>We can see that each of the forests has 20 - 30 (ish) species, but we have no idea about the diversity, evenness, or overlap among those species. For all we know those data sets could be made of 97% white-tailed deer and 1 photo sequence each of another 18 - 32 mammal species. We can turn to <code>iNext</code> to figure some of this out. FYI, there are supposed to be 80 terrestrial mammal species in all of Florida, including bats &amp; rodents that camera traps most likely wouldn’t capture.</p>
<p>To make our data play nicely with <code>iNEXT</code>, it needs to be transformed slightly. This is done below.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">speciesCount</span>[<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">speciesCount</span>)]<span class="kw">=</span><span class="fl">0</span> <span class="co">#This turns the NAs that come from summing 0's into real 0's for analysis</span>
<span class="no">camDiv</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="no">speciesCount</span>) <span class="co">#Since iNext wants a data frame, turn the tibble into one</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">camDiv</span>) <span class="kw">&lt;-</span> <span class="no">camDiv</span>$<span class="no">Common.Name</span> <span class="co">#iNext also wants the species ID as row names. </span>
<span class="no">camDiv</span> <span class="kw">&lt;-</span> <span class="no">camDiv</span>[<span class="fl">2</span>:<span class="fl">6</span>] <span class="co">#Now we can get rid of the species name since it's already in our row name.</span></pre></body></html></div>
<p>Now that the data are in a format <code>iNEXT</code> likes, we can calculate species <strong>Richness</strong>. Because our data are counts, the data type is abundance. Hill numbers are calculated as: <span class="math display">\[^{q}D = (\sum_{i=1}^{S}p_{i})^{1/(1-q)}\]</span></p>
<p>Where: <em>S</em> is the number of species in the assemblage and each <em>i</em> species has the relative abundance <span class="math inline">\(p_{i}\)</span>. By changing the exponent <em>q</em> we change how sensitive the equation is to relative frequencies and therefore the shape of the distribution and what it represents. <em>q</em> = 0 is Richness, <em>q</em> = 1 is the Shannon Diversity index, and <em>q</em> = 2 is the Simpson’s Diversity index. More on those below.</p>
</div>
<div id="richness" class="section level4">
<h4 class="hasAnchor">
<a href="#richness" class="anchor"></a>Richness</h4>
<p>So, we can calculate species <strong>Richness</strong> and then plot richness for each forest.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">richness</span> <span class="kw">&lt;-</span> <span class="fu">iNEXT</span>(<span class="no">camDiv</span>, <span class="kw">q</span><span class="kw">=</span><span class="fl">0</span>, <span class="kw">datatype</span> <span class="kw">=</span> <span class="st">"abundance"</span>) <span class="co">#This calculates hill numbers for the number of observations we have. q changes the expected relationship. 0 will give Richness</span>
<span class="fu">ggiNEXT</span>(<span class="no">richness</span>)+
  <span class="fu">theme</span>(<span class="kw">legend.position</span> <span class="kw">=</span> <span class="st">"right"</span>)+
  <span class="fu">theme_classic</span>()</pre></body></html></div>
</div>
<div id="diversity" class="section level4">
<h4 class="hasAnchor">
<a href="#diversity" class="anchor"></a>Diversity</h4>
<p>The first diversity index that Hill numbers calculate is equivalent to the Shannon Diversity Index. This counts all species equally, so diversity is calculated in proportion to its abundance.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">diversity_Shan</span> <span class="kw">&lt;-</span> <span class="fu">iNEXT</span>(<span class="no">camDiv</span>, <span class="kw">q</span><span class="kw">=</span><span class="fl">1</span>, <span class="kw">datatype</span> <span class="kw">=</span> <span class="st">"abundance"</span>) <span class="co">#This calculates hill numbers for the number of observations we have. q changes the expected relationship. q=1 gives the Shannon Diversity index. </span>
<span class="fu">ggiNEXT</span>(<span class="no">diversity_Shan</span>)+
  <span class="fu">theme</span>(<span class="kw">legend.position</span> <span class="kw">=</span> <span class="st">"right"</span>)+
  <span class="fu">theme_classic</span>()</pre></body></html></div>
<p>The next diversity index is Simpson’s Diversity Index. This discounts all but the most common species.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">diversity_Simps</span> <span class="kw">&lt;-</span> <span class="fu">iNEXT</span>(<span class="no">camDiv</span>, <span class="kw">q</span><span class="kw">=</span><span class="fl">2</span>, <span class="kw">datatype</span> <span class="kw">=</span> <span class="st">"abundance"</span>) <span class="co">#This calculates hill numbers for the number of observations we have. q changes the expected relationship. q=2 gives the Simpsons Diversity index.  </span>
<span class="fu">ggiNEXT</span>(<span class="no">diversity_Simps</span>)+
  <span class="fu">theme</span>(<span class="kw">legend.position</span> <span class="kw">=</span> <span class="st">"right"</span>)+
  <span class="fu">theme_classic</span>()</pre></body></html></div>
<p>These can also all be run at the same time and we can look at the effects of each diversity calculation (<em>q</em>) within each site</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">allDiversity</span> <span class="kw">&lt;-</span> <span class="fu">iNEXT</span>(<span class="no">camDiv</span>, <span class="kw">q</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span>), <span class="kw">datatype</span><span class="kw">=</span><span class="st">"abundance"</span>, <span class="kw">endpoint</span><span class="kw">=</span><span class="fl">7000</span>)
<span class="fu">ggiNEXT</span>(<span class="no">allDiversity</span>, <span class="kw">type</span><span class="kw">=</span><span class="fl">1</span>, <span class="kw">facet.var</span><span class="kw">=</span><span class="st">"site"</span>)+
  <span class="fu">theme_classic</span>()</pre></body></html></div>
<p><strong>Questions</strong></p>
<ol style="list-style-type: decimal">
<li>Which habitats have the largest number of species?<br><p style="color:blue">
</p>
</li>
<li>What do you notice about the differences between the Shannon (<em>q</em>=1) &amp; Simpson’s (<em>1</em>=2) Diversity indices? Is their relationship (e.g., distance between them) consistent across sites?<br><p style="color:blue">
</p>
</li>
<li>Are abundance, richness, and diversity closely related to each other in these systems? Are habitats with the highest abundances the most diverse? Why or why not?<br><p style="color:blue">
</p>
 ###Plotting our data in space These are data that were collected in a spatial context, so why not make a map? We have the latitude &amp; longitude of each camera, so they can be plotted and colored by their habitat typel</li>
</ol>
<p>#Let’s plot by deployments location and total number of species</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu">ggplot</span>(<span class="no">cam</span>, <span class="fu">aes</span>(<span class="kw">x</span><span class="kw">=</span><span class="no">Actual.Lon</span>, <span class="kw">y</span><span class="kw">=</span><span class="no">Actual.Lat</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">Subproject</span>))+
  <span class="fu">geom_point</span>()+
  <span class="fu">theme_bw</span>()</pre></body></html></div>
<strong>Question</strong> 4. Are these habitats spread out or clustered together? Do you think this has any impact on the diversity measures?<br><p style="color:blue">
</p>
<p><br>
We can also plot the location of each camera scaled by the number of animals observed at that spot and colored by the habitat. We need to do a bit of summarizing first.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">deployCount</span> <span class="kw">&lt;-</span> <span class="no">cam</span> <span class="kw">%&gt;%</span> <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">Common.Name</span>, <span class="no">Count</span>, <span class="no">Deployment.ID</span>, <span class="no">Actual.Lon</span>, <span class="no">Actual.Lat</span>, <span class="no">Subproject</span>) <span class="kw">%&gt;%</span>
  <span class="fu">group_by</span>(<span class="no">Deployment.ID</span>, <span class="no">Actual.Lon</span>, <span class="no">Actual.Lat</span>, <span class="no">Subproject</span>) <span class="kw">%&gt;%</span>
  <span class="fu">summarize</span>(<span class="kw">totalCount</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="no">Count</span>))

<span class="fu">ggplot</span>(<span class="no">deployCount</span>)+
  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="kw">x</span><span class="kw">=</span><span class="no">Actual.Lon</span>, <span class="kw">y</span><span class="kw">=</span><span class="no">Actual.Lat</span>, <span class="kw">size</span><span class="kw">=</span><span class="no">totalCount</span>, <span class="kw">color</span><span class="kw">=</span><span class="no">Subproject</span>), <span class="kw">alpha</span><span class="kw">=</span><span class="fl">0.5</span>)+
  <span class="fu">theme_bw</span>()</pre></body></html></div>
<p>Lastly, we can plot those data in a zoomable, interactive map</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">sf</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">mapview</span>)

<span class="co">#Transform these objects into something that can be plotted with the package {sf}</span>
<span class="no">deployCount_sf</span> <span class="kw">&lt;-</span> <span class="no">deployCount</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/sf/man/st_as_sf.html">st_as_sf</a></span>(<span class="kw">coords</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Actual.Lon"</span>, <span class="st">"Actual.Lat"</span>), <span class="kw">crs</span><span class="kw">=</span><span class="fl">4326</span>)

<span class="no">camMap</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html">mapview</a></span>(<span class="no">deployCount_sf</span>, <span class="kw">zcol</span><span class="kw">=</span><span class="st">"Subproject"</span>, <span class="kw">cex</span><span class="kw">=</span><span class="st">"totalCount"</span>, <span class="kw">layer.name</span> <span class="kw">=</span> <span class="st">"Habitat Type"</span>)
<span class="no">camMap</span></pre></body></html></div>
</div>
<div id="now-its-your-turn" class="section level3">
<h3 class="hasAnchor">
<a href="#now-its-your-turn" class="anchor"></a>Now it’s your turn</h3>
<p>Here is a link to last year’s camera data from North Oak Park</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">nop</span> <span class="kw">&lt;-</span> <span class="no">cam</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/googlesheets4/man/range_read.html">read_sheet</a></span>(<span class="st">"https://docs.google.com/spreadsheets/d/18yhZcaiYt6llg84eZYrNEewuLP3xaEyxYQQN__RQ3_4/edit?usp=sharing"</span>)</pre></body></html></div>
<p>Using these data, copy and modify whatever code you need from above (or from the past assignments) to accomplish the following tasks. Make sure you show the code that will output the correct answers and provide any interpretation that’s needed.</p>
<ol start="5" style="list-style-type: decimal">
<li>Which cameras captured the most deer? Show me on a ggplot. To do this you will need to calculate the sum for each species per camera (think grouping), then filter these for deer only. Then plot these data using ggplot with the camera locations on the x-axis (longitude) and y-axis (latitude), and scale the size or color by the number of deer captured.</li>
</ol>
<p> 6. Where was the highest diversity, measured by the Shannon’s Diversity Index, in the forest? Show me on a map with ggplot.</p>
 7. What do you see from the map of diversity at each camera site? Are there any patterns? FYI, the site locations are the same (but their names are different).
<p style="color:blue">
</p>
 8. What other kinds of information would you want to know to understand the forest dynamics a bit more and its relationship with its surroundings?
<p style="color:blue">
</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by April Wright.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
